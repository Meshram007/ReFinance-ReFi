// //testing mainnet
// const { expect, assert } = require("chai");
// const { ethers } = require("hardhat");
// const Web3 = require("web3");
// const hre = require("hardhat");
// const axios = require('axios');
// const truffleAssert = require('truffle-assertions');
// const BigNumber = ethers.BigNumber

// const contAbi = [
//     { "inputs": [{ "internalType": "address", "name": "_storage", "type": "address" }, { "internalType": "address", "name": "_feeRewardForwarder", "type": "address" }, { "internalType": "address[]", "name": "_whitelist", "type": "address[]" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "vault", "type": "address" }, { "indexed": true, "internalType": "address", "name": "strategy", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "oldSharePrice", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newSharePrice", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "timestamp", "type": "uint256" }], "name": "SharePriceChangeLog", "type": "event" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_target", "type": "address" }], "name": "addCodeToWhitelist", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_worker", "type": "address" }], "name": "addHardWorker", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address[]", "name": "_targets", "type": "address[]" }], "name": "addMultipleToWhitelist", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_target", "type": "address" }], "name": "addToWhitelist", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_vault", "type": "address" }, { "internalType": "address", "name": "_strategy", "type": "address" }], "name": "addVaultAndStrategy", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "name": "codeWhitelist", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_vault", "type": "address" }], "name": "doHardWork", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "feeRewardForwarder", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "a", "type": "address" }], "name": "getContractHash", "outputs": [{ "internalType": "bytes32", "name": "hash", "type": "bytes32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "governance", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "_addr", "type": "address" }], "name": "greyList", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "hardRewards", "outputs": [{ "internalType": "contract IHardRewards", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "hardWorkers", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "multiSig", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "uint256", "name": "fee", "type": "uint256" }], "name": "notifyFee", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "profitSharingDenominator", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "profitSharingNumerator", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_target", "type": "address" }], "name": "removeCodeFromWhitelist", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_target", "type": "address" }], "name": "removeFromWhitelist", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_worker", "type": "address" }], "name": "removeHardWorker", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address[]", "name": "_targets", "type": "address[]" }], "name": "removeMultipleFromWhitelist", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_token", "type": "address" }, { "internalType": "uint256", "name": "_amount", "type": "uint256" }], "name": "salvage", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_strategy", "type": "address" }, { "internalType": "address", "name": "_token", "type": "address" }, { "internalType": "uint256", "name": "_amount", "type": "uint256" }], "name": "salvageStrategy", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_feeRewardForwarder", "type": "address" }], "name": "setFeeRewardForwarder", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_hardRewards", "type": "address" }], "name": "setHardRewards", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_store", "type": "address" }], "name": "setStorage", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "store", "outputs": [{ "internalType": "contract Storage", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "whitelist", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }
// ]
// const contaddress = "0x3cC47874dC50D98425ec79e647d83495637C55e3";

// const compContAbi = [
//     { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "string", "name": "action", "type": "string" }, { "indexed": false, "internalType": "bool", "name": "pauseState", "type": "bool" }], "name": "ActionPaused", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": false, "internalType": "string", "name": "action", "type": "string" }, { "indexed": false, "internalType": "bool", "name": "pauseState", "type": "bool" }], "name": "ActionPaused", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "oldCompAccrued", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newCompAccrued", "type": "uint256" }], "name": "CompAccruedAdjusted", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "newSpeed", "type": "uint256" }], "name": "CompBorrowSpeedUpdated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "recipient", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "CompGranted", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "oldCompReceivable", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newCompReceivable", "type": "uint256" }], "name": "CompReceivableUpdated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "newSpeed", "type": "uint256" }], "name": "CompSupplySpeedUpdated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "contributor", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "newSpeed", "type": "uint256" }], "name": "ContributorCompSpeedUpdated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": true, "internalType": "address", "name": "borrower", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "compDelta", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "compBorrowIndex", "type": "uint256" }], "name": "DistributedBorrowerComp", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": true, "internalType": "address", "name": "supplier", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "compDelta", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "compSupplyIndex", "type": "uint256" }], "name": "DistributedSupplierComp", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "error", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "info", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "detail", "type": "uint256" }], "name": "Failure", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "account", "type": "address" }], "name": "MarketEntered", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "account", "type": "address" }], "name": "MarketExited", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "contract CToken", "name": "cToken", "type": "address" }], "name": "MarketListed", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "newBorrowCap", "type": "uint256" }], "name": "NewBorrowCap", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "oldBorrowCapGuardian", "type": "address" }, { "indexed": false, "internalType": "address", "name": "newBorrowCapGuardian", "type": "address" }], "name": "NewBorrowCapGuardian", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "oldCloseFactorMantissa", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newCloseFactorMantissa", "type": "uint256" }], "name": "NewCloseFactor", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "oldCollateralFactorMantissa", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newCollateralFactorMantissa", "type": "uint256" }], "name": "NewCollateralFactor", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "oldLiquidationIncentiveMantissa", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newLiquidationIncentiveMantissa", "type": "uint256" }], "name": "NewLiquidationIncentive", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "oldPauseGuardian", "type": "address" }, { "indexed": false, "internalType": "address", "name": "newPauseGuardian", "type": "address" }], "name": "NewPauseGuardian", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "contract PriceOracle", "name": "oldPriceOracle", "type": "address" }, { "indexed": false, "internalType": "contract PriceOracle", "name": "newPriceOracle", "type": "address" }], "name": "NewPriceOracle", "type": "event" }, { "constant": false, "inputs": [{ "internalType": "contract Unitroller", "name": "unitroller", "type": "address" }], "name": "_become", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "_borrowGuardianPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "_grantComp", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "_mintGuardianPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "newBorrowCapGuardian", "type": "address" }], "name": "_setBorrowCapGuardian", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "internalType": "bool", "name": "state", "type": "bool" }], "name": "_setBorrowPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "newCloseFactorMantissa", "type": "uint256" }], "name": "_setCloseFactor", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "internalType": "uint256", "name": "newCollateralFactorMantissa", "type": "uint256" }], "name": "_setCollateralFactor", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "contract CToken[]", "name": "cTokens", "type": "address[]" }, { "internalType": "uint256[]", "name": "supplySpeeds", "type": "uint256[]" }, { "internalType": "uint256[]", "name": "borrowSpeeds", "type": "uint256[]" }], "name": "_setCompSpeeds", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "contributor", "type": "address" }, { "internalType": "uint256", "name": "compSpeed", "type": "uint256" }], "name": "_setContributorCompSpeed", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "newLiquidationIncentiveMantissa", "type": "uint256" }], "name": "_setLiquidationIncentive", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "contract CToken[]", "name": "cTokens", "type": "address[]" }, { "internalType": "uint256[]", "name": "newBorrowCaps", "type": "uint256[]" }], "name": "_setMarketBorrowCaps", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "contract CToken", "name": "cToken", "type": "address" }, { "internalType": "bool", "name": "state", "type": "bool" }], "name": "_setMintPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "newPauseGuardian", "type": "address" }], "name": "_setPauseGuardian", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "contract PriceOracle", "name": "newOracle", "type": "address" }], "name": "_setPriceOracle", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "bool", "name": "state", "type": "bool" }], "name": "_setSeizePaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "bool", "name": "state", "type": "bool" }], "name": "_setTransferPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "contract CToken", "name": "cToken", "type": "address" }], "name": "_supportMarket", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "accountAssets", "outputs": [{ "internalType": "contract CToken", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "admin", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "name": "allMarkets", "outputs": [{ "internalType": "contract CToken", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "borrowAmount", "type": "uint256" }], "name": "borrowAllowed", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "borrowCapGuardian", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "borrowCaps", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "borrowGuardianPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "borrowAmount", "type": "uint256" }], "name": "borrowVerify", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "account", "type": "address" }, { "internalType": "contract CToken", "name": "cToken", "type": "address" }], "name": "checkMembership", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }, { "internalType": "contract CToken[]", "name": "cTokens", "type": "address[]" }], "name": "claimComp", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address[]", "name": "holders", "type": "address[]" }, { "internalType": "contract CToken[]", "name": "cTokens", "type": "address[]" }, { "internalType": "bool", "name": "borrowers", "type": "bool" }, { "internalType": "bool", "name": "suppliers", "type": "bool" }], "name": "claimComp", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }], "name": "claimComp", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "closeFactorMantissa", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compAccrued", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compBorrowSpeeds", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compBorrowState", "outputs": [{ "internalType": "uint224", "name": "index", "type": "uint224" }, { "internalType": "uint32", "name": "block", "type": "uint32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "address", "name": "", "type": "address" }], "name": "compBorrowerIndex", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compContributorSpeeds", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "compInitialIndex", "outputs": [{ "internalType": "uint224", "name": "", "type": "uint224" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "compRate", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compReceivable", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compSpeeds", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "address", "name": "", "type": "address" }], "name": "compSupplierIndex", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compSupplySpeeds", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "compSupplyState", "outputs": [{ "internalType": "uint224", "name": "index", "type": "uint224" }, { "internalType": "uint32", "name": "block", "type": "uint32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "comptrollerImplementation", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address[]", "name": "cTokens", "type": "address[]" }], "name": "enterMarkets", "outputs": [{ "internalType": "uint256[]", "name": "", "type": "uint256[]" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cTokenAddress", "type": "address" }], "name": "exitMarket", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address[]", "name": "affectedUsers", "type": "address[]" }, { "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "name": "fixBadAccruals", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "getAccountLiquidity", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getAllMarkets", "outputs": [{ "internalType": "contract CToken[]", "name": "", "type": "address[]" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "getAssetsIn", "outputs": [{ "internalType": "contract CToken[]", "name": "", "type": "address[]" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getBlockNumber", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getCompAddress", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "account", "type": "address" }, { "internalType": "address", "name": "cTokenModify", "type": "address" }, { "internalType": "uint256", "name": "redeemTokens", "type": "uint256" }, { "internalType": "uint256", "name": "borrowAmount", "type": "uint256" }], "name": "getHypotheticalAccountLiquidity", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "isComptroller", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "contract CToken", "name": "cToken", "type": "address" }], "name": "isDeprecated", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "lastContributorBlock", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cTokenBorrowed", "type": "address" }, { "internalType": "address", "name": "cTokenCollateral", "type": "address" }, { "internalType": "address", "name": "liquidator", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "repayAmount", "type": "uint256" }], "name": "liquidateBorrowAllowed", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cTokenBorrowed", "type": "address" }, { "internalType": "address", "name": "cTokenCollateral", "type": "address" }, { "internalType": "address", "name": "liquidator", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "actualRepayAmount", "type": "uint256" }, { "internalType": "uint256", "name": "seizeTokens", "type": "uint256" }], "name": "liquidateBorrowVerify", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "cTokenBorrowed", "type": "address" }, { "internalType": "address", "name": "cTokenCollateral", "type": "address" }, { "internalType": "uint256", "name": "actualRepayAmount", "type": "uint256" }], "name": "liquidateCalculateSeizeTokens", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "liquidationIncentiveMantissa", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "markets", "outputs": [{ "internalType": "bool", "name": "isListed", "type": "bool" }, { "internalType": "uint256", "name": "collateralFactorMantissa", "type": "uint256" }, { "internalType": "bool", "name": "isComped", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "maxAssets", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "minter", "type": "address" }, { "internalType": "uint256", "name": "mintAmount", "type": "uint256" }], "name": "mintAllowed", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "mintGuardianPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "minter", "type": "address" }, { "internalType": "uint256", "name": "actualMintAmount", "type": "uint256" }, { "internalType": "uint256", "name": "mintTokens", "type": "uint256" }], "name": "mintVerify", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "oracle", "outputs": [{ "internalType": "contract PriceOracle", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "pauseGuardian", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "pendingAdmin", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "pendingComptrollerImplementation", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "proposal65FixExecuted", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "redeemer", "type": "address" }, { "internalType": "uint256", "name": "redeemTokens", "type": "uint256" }], "name": "redeemAllowed", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "redeemer", "type": "address" }, { "internalType": "uint256", "name": "redeemAmount", "type": "uint256" }, { "internalType": "uint256", "name": "redeemTokens", "type": "uint256" }], "name": "redeemVerify", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "payer", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "repayAmount", "type": "uint256" }], "name": "repayBorrowAllowed", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "payer", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "actualRepayAmount", "type": "uint256" }, { "internalType": "uint256", "name": "borrowerIndex", "type": "uint256" }], "name": "repayBorrowVerify", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cTokenCollateral", "type": "address" }, { "internalType": "address", "name": "cTokenBorrowed", "type": "address" }, { "internalType": "address", "name": "liquidator", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "seizeTokens", "type": "uint256" }], "name": "seizeAllowed", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "seizeGuardianPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cTokenCollateral", "type": "address" }, { "internalType": "address", "name": "cTokenBorrowed", "type": "address" }, { "internalType": "address", "name": "liquidator", "type": "address" }, { "internalType": "address", "name": "borrower", "type": "address" }, { "internalType": "uint256", "name": "seizeTokens", "type": "uint256" }], "name": "seizeVerify", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "src", "type": "address" }, { "internalType": "address", "name": "dst", "type": "address" }, { "internalType": "uint256", "name": "transferTokens", "type": "uint256" }], "name": "transferAllowed", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "transferGuardianPaused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "src", "type": "address" }, { "internalType": "address", "name": "dst", "type": "address" }, { "internalType": "uint256", "name": "transferTokens", "type": "uint256" }], "name": "transferVerify", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "contributor", "type": "address" }], "name": "updateContributorRewards", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }
// ]
// const compContAddress = "0x3d9819210a31b4961b30ef54be2aed79b9c9cd3b"
// let compCont;

// const daiAbi = [
//     { "inputs": [{ "internalType": "uint256", "name": "chainId_", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "src", "type": "address" }, { "indexed": true, "internalType": "address", "name": "guy", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "Approval", "type": "event" }, { "anonymous": true, "inputs": [{ "indexed": true, "internalType": "bytes4", "name": "sig", "type": "bytes4" }, { "indexed": true, "internalType": "address", "name": "usr", "type": "address" }, { "indexed": true, "internalType": "bytes32", "name": "arg1", "type": "bytes32" }, { "indexed": true, "internalType": "bytes32", "name": "arg2", "type": "bytes32" }, { "indexed": false, "internalType": "bytes", "name": "data", "type": "bytes" }], "name": "LogNote", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "src", "type": "address" }, { "indexed": true, "internalType": "address", "name": "dst", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "constant": true, "inputs": [], "name": "DOMAIN_SEPARATOR", "outputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "PERMIT_TYPEHASH", "outputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "address", "name": "", "type": "address" }], "name": "allowance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "usr", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "approve", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "balanceOf", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "usr", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "burn", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "decimals", "outputs": [{ "internalType": "uint8", "name": "", "type": "uint8" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "guy", "type": "address" }], "name": "deny", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "usr", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "mint", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "src", "type": "address" }, { "internalType": "address", "name": "dst", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "move", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "name", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "nonces", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "nonce", "type": "uint256" }, { "internalType": "uint256", "name": "expiry", "type": "uint256" }, { "internalType": "bool", "name": "allowed", "type": "bool" }, { "internalType": "uint8", "name": "v", "type": "uint8" }, { "internalType": "bytes32", "name": "r", "type": "bytes32" }, { "internalType": "bytes32", "name": "s", "type": "bytes32" }], "name": "permit", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "usr", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "pull", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "usr", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "push", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "guy", "type": "address" }], "name": "rely", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "symbol", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "totalSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "dst", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "transfer", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "src", "type": "address" }, { "internalType": "address", "name": "dst", "type": "address" }, { "internalType": "uint256", "name": "wad", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "version", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "wards", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }
// ]
// const daiAddress = "0x6B175474E89094C44Da98b954EedeAC495271d0F";
// let dai;

// const oracleAbi = [
//     { "inputs": [{ "internalType": "uint256", "name": "anchorToleranceMantissa_", "type": "uint256" }, { "internalType": "uint256", "name": "anchorPeriod_", "type": "uint256" }, { "components": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "internalType": "uint256", "name": "baseUnit", "type": "uint256" }, { "internalType": "enum UniswapConfig.PriceSource", "name": "priceSource", "type": "uint8" }, { "internalType": "uint256", "name": "fixedPrice", "type": "uint256" }, { "internalType": "address", "name": "uniswapMarket", "type": "address" }, { "internalType": "address", "name": "reporter", "type": "address" }, { "internalType": "uint256", "name": "reporterMultiplier", "type": "uint256" }, { "internalType": "bool", "name": "isUniswapReversed", "type": "bool" }], "internalType": "struct UniswapConfig.TokenConfig[]", "name": "configs", "type": "tuple[]" }], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "indexed": false, "internalType": "uint256", "name": "anchorPrice", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "oldTimestamp", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newTimestamp", "type": "uint256" }], "name": "AnchorPriceUpdated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }], "name": "FailoverActivated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }], "name": "FailoverDeactivated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }], "name": "OwnershipTransferRequested", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "indexed": false, "internalType": "uint256", "name": "reporter", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "anchor", "type": "uint256" }], "name": "PriceGuarded", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "indexed": false, "internalType": "uint256", "name": "price", "type": "uint256" }], "name": "PriceUpdated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "indexed": false, "internalType": "uint256", "name": "oldTimestamp", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newTimestamp", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "oldPrice", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newPrice", "type": "uint256" }], "name": "UniswapWindowUpdated", "type": "event" }, { "inputs": [], "name": "acceptOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }], "name": "activateFailover", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "anchorPeriod", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }], "name": "deactivateFailover", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "ethBaseUnit", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "expScale", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "i", "type": "uint256" }], "name": "getTokenConfig", "outputs": [{ "components": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "internalType": "uint256", "name": "baseUnit", "type": "uint256" }, { "internalType": "enum UniswapConfig.PriceSource", "name": "priceSource", "type": "uint8" }, { "internalType": "uint256", "name": "fixedPrice", "type": "uint256" }, { "internalType": "address", "name": "uniswapMarket", "type": "address" }, { "internalType": "address", "name": "reporter", "type": "address" }, { "internalType": "uint256", "name": "reporterMultiplier", "type": "uint256" }, { "internalType": "bool", "name": "isUniswapReversed", "type": "bool" }], "internalType": "struct UniswapConfig.TokenConfig", "name": "", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }], "name": "getTokenConfigByCToken", "outputs": [{ "components": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "internalType": "uint256", "name": "baseUnit", "type": "uint256" }, { "internalType": "enum UniswapConfig.PriceSource", "name": "priceSource", "type": "uint8" }, { "internalType": "uint256", "name": "fixedPrice", "type": "uint256" }, { "internalType": "address", "name": "uniswapMarket", "type": "address" }, { "internalType": "address", "name": "reporter", "type": "address" }, { "internalType": "uint256", "name": "reporterMultiplier", "type": "uint256" }, { "internalType": "bool", "name": "isUniswapReversed", "type": "bool" }], "internalType": "struct UniswapConfig.TokenConfig", "name": "", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "reporter", "type": "address" }], "name": "getTokenConfigByReporter", "outputs": [{ "components": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "internalType": "uint256", "name": "baseUnit", "type": "uint256" }, { "internalType": "enum UniswapConfig.PriceSource", "name": "priceSource", "type": "uint8" }, { "internalType": "uint256", "name": "fixedPrice", "type": "uint256" }, { "internalType": "address", "name": "uniswapMarket", "type": "address" }, { "internalType": "address", "name": "reporter", "type": "address" }, { "internalType": "uint256", "name": "reporterMultiplier", "type": "uint256" }, { "internalType": "bool", "name": "isUniswapReversed", "type": "bool" }], "internalType": "struct UniswapConfig.TokenConfig", "name": "", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "string", "name": "symbol", "type": "string" }], "name": "getTokenConfigBySymbol", "outputs": [{ "components": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "internalType": "uint256", "name": "baseUnit", "type": "uint256" }, { "internalType": "enum UniswapConfig.PriceSource", "name": "priceSource", "type": "uint8" }, { "internalType": "uint256", "name": "fixedPrice", "type": "uint256" }, { "internalType": "address", "name": "uniswapMarket", "type": "address" }, { "internalType": "address", "name": "reporter", "type": "address" }, { "internalType": "uint256", "name": "reporterMultiplier", "type": "uint256" }, { "internalType": "bool", "name": "isUniswapReversed", "type": "bool" }], "internalType": "struct UniswapConfig.TokenConfig", "name": "", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }], "name": "getTokenConfigBySymbolHash", "outputs": [{ "components": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "internalType": "uint256", "name": "baseUnit", "type": "uint256" }, { "internalType": "enum UniswapConfig.PriceSource", "name": "priceSource", "type": "uint8" }, { "internalType": "uint256", "name": "fixedPrice", "type": "uint256" }, { "internalType": "address", "name": "uniswapMarket", "type": "address" }, { "internalType": "address", "name": "reporter", "type": "address" }, { "internalType": "uint256", "name": "reporterMultiplier", "type": "uint256" }, { "internalType": "bool", "name": "isUniswapReversed", "type": "bool" }], "internalType": "struct UniswapConfig.TokenConfig", "name": "", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "underlying", "type": "address" }], "name": "getTokenConfigByUnderlying", "outputs": [{ "components": [{ "internalType": "address", "name": "cToken", "type": "address" }, { "internalType": "address", "name": "underlying", "type": "address" }, { "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }, { "internalType": "uint256", "name": "baseUnit", "type": "uint256" }, { "internalType": "enum UniswapConfig.PriceSource", "name": "priceSource", "type": "uint8" }, { "internalType": "uint256", "name": "fixedPrice", "type": "uint256" }, { "internalType": "address", "name": "uniswapMarket", "type": "address" }, { "internalType": "address", "name": "reporter", "type": "address" }, { "internalType": "uint256", "name": "reporterMultiplier", "type": "uint256" }, { "internalType": "bool", "name": "isUniswapReversed", "type": "bool" }], "internalType": "struct UniswapConfig.TokenConfig", "name": "", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "cToken", "type": "address" }], "name": "getUnderlyingPrice", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "lowerBoundAnchorRatio", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "maxTokens", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "name": "newObservations", "outputs": [{ "internalType": "uint256", "name": "timestamp", "type": "uint256" }, { "internalType": "uint256", "name": "acc", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "numTokens", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "name": "oldObservations", "outputs": [{ "internalType": "uint256", "name": "timestamp", "type": "uint256" }, { "internalType": "uint256", "name": "acc", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "owner", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "symbolHash", "type": "bytes32" }], "name": "pokeFailedOverPrice", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "string", "name": "symbol", "type": "string" }], "name": "price", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "name": "prices", "outputs": [{ "internalType": "uint248", "name": "price", "type": "uint248" }, { "internalType": "bool", "name": "failoverActive", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "to", "type": "address" }], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "upperBoundAnchorRatio", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "int256", "name": "", "type": "int256" }, { "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "int256", "name": "currentAnswer", "type": "int256" }], "name": "validate", "outputs": [{ "internalType": "bool", "name": "valid", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }
// ]
// const oracleAddress = "0x046728da7cb8272284238bD3e47909823d63A58D";
// let oracle;

// const cethAbi = [
//     { "constant": true, "inputs": [], "name": "name", "outputs": [{ "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "spender", "type": "address" }, { "name": "amount", "type": "uint256" }], "name": "approve", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "mint", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": true, "inputs": [], "name": "reserveFactorMantissa", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "account", "type": "address" }], "name": "borrowBalanceCurrent", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "totalSupply", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "exchangeRateStored", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "src", "type": "address" }, { "name": "dst", "type": "address" }, { "name": "amount", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "pendingAdmin", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "decimals", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "owner", "type": "address" }], "name": "balanceOfUnderlying", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "getCash", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "newComptroller", "type": "address" }], "name": "_setComptroller", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "totalBorrows", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "repayBorrow", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": true, "inputs": [], "name": "comptroller", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "reduceAmount", "type": "uint256" }], "name": "_reduceReserves", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "initialExchangeRateMantissa", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "accrualBlockNumber", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "totalBorrowsCurrent", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "redeemAmount", "type": "uint256" }], "name": "redeemUnderlying", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "totalReserves", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "symbol", "outputs": [{ "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "account", "type": "address" }], "name": "borrowBalanceStored", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "accrueInterest", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "dst", "type": "address" }, { "name": "amount", "type": "uint256" }], "name": "transfer", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "borrowIndex", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "borrower", "type": "address" }, { "name": "cTokenCollateral", "type": "address" }], "name": "liquidateBorrow", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": true, "inputs": [], "name": "supplyRatePerBlock", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "liquidator", "type": "address" }, { "name": "borrower", "type": "address" }, { "name": "seizeTokens", "type": "uint256" }], "name": "seize", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "newPendingAdmin", "type": "address" }], "name": "_setPendingAdmin", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "exchangeRateCurrent", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "account", "type": "address" }], "name": "getAccountSnapshot", "outputs": [{ "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "borrowAmount", "type": "uint256" }], "name": "borrow", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "redeemTokens", "type": "uint256" }], "name": "redeem", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "owner", "type": "address" }, { "name": "spender", "type": "address" }], "name": "allowance", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "borrower", "type": "address" }], "name": "repayBorrowBehalf", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [], "name": "_acceptAdmin", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "newInterestRateModel", "type": "address" }], "name": "_setInterestRateModel", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "interestRateModel", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "admin", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "borrowRatePerBlock", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "newReserveFactorMantissa", "type": "uint256" }], "name": "_setReserveFactor", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "isCToken", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "comptroller_", "type": "address" }, { "name": "interestRateModel_", "type": "address" }, { "name": "initialExchangeRateMantissa_", "type": "uint256" }, { "name": "name_", "type": "string" }, { "name": "symbol_", "type": "string" }, { "name": "decimals_", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "payable": true, "stateMutability": "payable", "type": "fallback" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "interestAccumulated", "type": "uint256" }, { "indexed": false, "name": "borrowIndex", "type": "uint256" }, { "indexed": false, "name": "totalBorrows", "type": "uint256" }], "name": "AccrueInterest", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "minter", "type": "address" }, { "indexed": false, "name": "mintAmount", "type": "uint256" }, { "indexed": false, "name": "mintTokens", "type": "uint256" }], "name": "Mint", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "redeemer", "type": "address" }, { "indexed": false, "name": "redeemAmount", "type": "uint256" }, { "indexed": false, "name": "redeemTokens", "type": "uint256" }], "name": "Redeem", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "borrower", "type": "address" }, { "indexed": false, "name": "borrowAmount", "type": "uint256" }, { "indexed": false, "name": "accountBorrows", "type": "uint256" }, { "indexed": false, "name": "totalBorrows", "type": "uint256" }], "name": "Borrow", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "payer", "type": "address" }, { "indexed": false, "name": "borrower", "type": "address" }, { "indexed": false, "name": "repayAmount", "type": "uint256" }, { "indexed": false, "name": "accountBorrows", "type": "uint256" }, { "indexed": false, "name": "totalBorrows", "type": "uint256" }], "name": "RepayBorrow", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "liquidator", "type": "address" }, { "indexed": false, "name": "borrower", "type": "address" }, { "indexed": false, "name": "repayAmount", "type": "uint256" }, { "indexed": false, "name": "cTokenCollateral", "type": "address" }, { "indexed": false, "name": "seizeTokens", "type": "uint256" }], "name": "LiquidateBorrow", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldPendingAdmin", "type": "address" }, { "indexed": false, "name": "newPendingAdmin", "type": "address" }], "name": "NewPendingAdmin", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldAdmin", "type": "address" }, { "indexed": false, "name": "newAdmin", "type": "address" }], "name": "NewAdmin", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldComptroller", "type": "address" }, { "indexed": false, "name": "newComptroller", "type": "address" }], "name": "NewComptroller", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldInterestRateModel", "type": "address" }, { "indexed": false, "name": "newInterestRateModel", "type": "address" }], "name": "NewMarketInterestRateModel", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldReserveFactorMantissa", "type": "uint256" }, { "indexed": false, "name": "newReserveFactorMantissa", "type": "uint256" }], "name": "NewReserveFactor", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "admin", "type": "address" }, { "indexed": false, "name": "reduceAmount", "type": "uint256" }, { "indexed": false, "name": "newTotalReserves", "type": "uint256" }], "name": "ReservesReduced", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "error", "type": "uint256" }, { "indexed": false, "name": "info", "type": "uint256" }, { "indexed": false, "name": "detail", "type": "uint256" }], "name": "Failure", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "from", "type": "address" }, { "indexed": true, "name": "to", "type": "address" }, { "indexed": false, "name": "amount", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "owner", "type": "address" }, { "indexed": true, "name": "spender", "type": "address" }, { "indexed": false, "name": "amount", "type": "uint256" }], "name": "Approval", "type": "event" }
// ]
// const cethaddress = "0x4ddc2d193948926d02f9b1fe9e1daa0718270ed5"
// let ceth;

// const cdaiAbi = [
//     { "constant": true, "inputs": [], "name": "name", "outputs": [{ "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "spender", "type": "address" }, { "name": "amount", "type": "uint256" }], "name": "approve", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "mint", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": true, "inputs": [], "name": "reserveFactorMantissa", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "account", "type": "address" }], "name": "borrowBalanceCurrent", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "totalSupply", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "exchangeRateStored", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "src", "type": "address" }, { "name": "dst", "type": "address" }, { "name": "amount", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "pendingAdmin", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "decimals", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "owner", "type": "address" }], "name": "balanceOfUnderlying", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "getCash", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "newComptroller", "type": "address" }], "name": "_setComptroller", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "totalBorrows", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "repayAmount", "type": "uint256" }], "name": "repayBorrow", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "comptroller", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "reduceAmount", "type": "uint256" }], "name": "_reduceReserves", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "initialExchangeRateMantissa", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "accrualBlockNumber", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "totalBorrowsCurrent", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "redeemAmount", "type": "uint256" }], "name": "redeemUnderlying", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "totalReserves", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "symbol", "outputs": [{ "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "name": "account", "type": "address" }], "name": "borrowBalanceStored", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "accrueInterest", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "dst", "type": "address" }, { "name": "amount", "type": "uint256" }], "name": "transfer", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "borrowIndex", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "borrower", "type": "address" }, { "name": "cTokenCollateral", "type": "address" }], "name": "liquidateBorrow", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": true, "inputs": [], "name": "supplyRatePerBlock", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "liquidator", "type": "address" }, { "name": "borrower", "type": "address" }, { "name": "seizeTokens", "type": "uint256" }], "name": "seize", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "newPendingAdmin", "type": "address" }], "name": "_setPendingAdmin", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "exchangeRateCurrent", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "account", "type": "address" }], "name": "getAccountSnapshot", "outputs": [{ "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "borrowAmount", "type": "uint256" }], "name": "borrow", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "redeemTokens", "type": "uint256" }], "name": "redeem", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "name": "owner", "type": "address" }, { "name": "spender", "type": "address" }], "name": "allowance", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "borrower", "type": "address" }], "name": "repayBorrowBehalf", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [], "name": "_acceptAdmin", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "name": "newInterestRateModel", "type": "address" }], "name": "_setInterestRateModel", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "interestRateModel", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "admin", "outputs": [{ "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "borrowRatePerBlock", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "name": "newReserveFactorMantissa", "type": "uint256" }], "name": "_setReserveFactor", "outputs": [{ "name": "", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "isCToken", "outputs": [{ "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "inputs": [{ "name": "comptroller_", "type": "address" }, { "name": "interestRateModel_", "type": "address" }, { "name": "initialExchangeRateMantissa_", "type": "uint256" }, { "name": "name_", "type": "string" }, { "name": "symbol_", "type": "string" }, { "name": "decimals_", "type": "uint256" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "payable": true, "stateMutability": "payable", "type": "fallback" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "interestAccumulated", "type": "uint256" }, { "indexed": false, "name": "borrowIndex", "type": "uint256" }, { "indexed": false, "name": "totalBorrows", "type": "uint256" }], "name": "AccrueInterest", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "minter", "type": "address" }, { "indexed": false, "name": "mintAmount", "type": "uint256" }, { "indexed": false, "name": "mintTokens", "type": "uint256" }], "name": "Mint", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "redeemer", "type": "address" }, { "indexed": false, "name": "redeemAmount", "type": "uint256" }, { "indexed": false, "name": "redeemTokens", "type": "uint256" }], "name": "Redeem", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "borrower", "type": "address" }, { "indexed": false, "name": "borrowAmount", "type": "uint256" }, { "indexed": false, "name": "accountBorrows", "type": "uint256" }, { "indexed": false, "name": "totalBorrows", "type": "uint256" }], "name": "Borrow", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "payer", "type": "address" }, { "indexed": false, "name": "borrower", "type": "address" }, { "indexed": false, "name": "repayAmount", "type": "uint256" }, { "indexed": false, "name": "accountBorrows", "type": "uint256" }, { "indexed": false, "name": "totalBorrows", "type": "uint256" }], "name": "RepayBorrow", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "liquidator", "type": "address" }, { "indexed": false, "name": "borrower", "type": "address" }, { "indexed": false, "name": "repayAmount", "type": "uint256" }, { "indexed": false, "name": "cTokenCollateral", "type": "address" }, { "indexed": false, "name": "seizeTokens", "type": "uint256" }], "name": "LiquidateBorrow", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldPendingAdmin", "type": "address" }, { "indexed": false, "name": "newPendingAdmin", "type": "address" }], "name": "NewPendingAdmin", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldAdmin", "type": "address" }, { "indexed": false, "name": "newAdmin", "type": "address" }], "name": "NewAdmin", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldComptroller", "type": "address" }, { "indexed": false, "name": "newComptroller", "type": "address" }], "name": "NewComptroller", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldInterestRateModel", "type": "address" }, { "indexed": false, "name": "newInterestRateModel", "type": "address" }], "name": "NewMarketInterestRateModel", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "oldReserveFactorMantissa", "type": "uint256" }, { "indexed": false, "name": "newReserveFactorMantissa", "type": "uint256" }], "name": "NewReserveFactor", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "admin", "type": "address" }, { "indexed": false, "name": "reduceAmount", "type": "uint256" }, { "indexed": false, "name": "newTotalReserves", "type": "uint256" }], "name": "ReservesReduced", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "name": "error", "type": "uint256" }, { "indexed": false, "name": "info", "type": "uint256" }, { "indexed": false, "name": "detail", "type": "uint256" }], "name": "Failure", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "from", "type": "address" }, { "indexed": true, "name": "to", "type": "address" }, { "indexed": false, "name": "amount", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "name": "owner", "type": "address" }, { "indexed": true, "name": "spender", "type": "address" }, { "indexed": false, "name": "amount", "type": "uint256" }], "name": "Approval", "type": "event" }
// ]
// const cdaiaddress = "0x5d3a536e4d6dbd6114cc1ead35777bab948e3643"
// let cdai;

// const ExvaultAbi = [
//     { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "spender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Approval", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "beneficiary", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "Deposit", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "Invest", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "newStrategy", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "time", "type": "uint256" }], "name": "StrategyAnnounced", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "newStrategy", "type": "address" }, { "indexed": false, "internalType": "address", "name": "oldStrategy", "type": "address" }], "name": "StrategyChanged", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "beneficiary", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "Withdraw", "type": "event" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" }], "name": "allowance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_strategy", "type": "address" }], "name": "announceStrategyUpdate", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "approve", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "availableToInvestOut", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "balanceOf", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "_strategy", "type": "address" }], "name": "canUpdateStrategy", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "controller", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "decimals", "outputs": [{ "internalType": "uint8", "name": "", "type": "uint8" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "subtractedValue", "type": "uint256" }], "name": "decreaseAllowance", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "deposit", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "address", "name": "holder", "type": "address" }], "name": "depositFor", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "doHardWork", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "finalizeStrategyUpdate", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "finalizeUpgrade", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "futureStrategy", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getPricePerFullShare", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "governance", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "addedValue", "type": "uint256" }], "name": "increaseAllowance", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "string", "name": "name", "type": "string" }, { "internalType": "string", "name": "symbol", "type": "string" }, { "internalType": "uint8", "name": "decimals", "type": "uint8" }], "name": "initialize", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_underlying", "type": "address" }, { "internalType": "uint256", "name": "_toInvestNumerator", "type": "uint256" }, { "internalType": "uint256", "name": "_toInvestDenominator", "type": "uint256" }, { "internalType": "uint256", "name": "_underlyingUnit", "type": "uint256" }, { "internalType": "uint256", "name": "_implementationChangeDelay", "type": "uint256" }, { "internalType": "uint256", "name": "_strategyChangeDelay", "type": "uint256" }], "name": "initialize", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_storage", "type": "address" }], "name": "initialize", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_storage", "type": "address" }, { "internalType": "address", "name": "_underlying", "type": "address" }, { "internalType": "uint256", "name": "_toInvestNumerator", "type": "uint256" }, { "internalType": "uint256", "name": "_toInvestDenominator", "type": "uint256" }], "name": "initializeVault", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "name", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "nextImplementation", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "nextImplementationDelay", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "nextImplementationTimestamp", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "rebalance", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "impl", "type": "address" }], "name": "scheduleUpgrade", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_store", "type": "address" }], "name": "setStorage", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_strategy", "type": "address" }], "name": "setStrategy", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "numerator", "type": "uint256" }, { "internalType": "uint256", "name": "denominator", "type": "uint256" }], "name": "setVaultFractionToInvest", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "shouldUpgrade", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }, { "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "strategy", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "strategyTimeLock", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "strategyUpdateTime", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "symbol", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "totalSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "transfer", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "sender", "type": "address" }, { "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "underlying", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "underlyingBalanceInVault", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "underlyingBalanceWithInvestment", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }], "name": "underlyingBalanceWithInvestmentForHolder", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "underlyingUnit", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "vaultFractionToInvestDenominator", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "vaultFractionToInvestNumerator", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "numberOfShares", "type": "uint256" }], "name": "withdraw", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "withdrawAll", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }
// ]
// const ExvaultAddress = "0xab7FA2B2985BCcfC13c6D86b1D5A17486ab1e04C"
// let Exvault;

// const ExpoolAbi = [
//     { "inputs": [{ "internalType": "address", "name": "_rewardToken", "type": "address" }, { "internalType": "address", "name": "_lpToken", "type": "address" }, { "internalType": "uint256", "name": "_duration", "type": "uint256" }, { "internalType": "address", "name": "_rewardDistribution", "type": "address" }, { "internalType": "address", "name": "_storage", "type": "address" }, { "internalType": "address", "name": "_sourceVault", "type": "address" }, { "internalType": "address", "name": "_migrationStrategy", "type": "address" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "account", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "legacyShare", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "newShare", "type": "uint256" }], "name": "Migrated", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "reward", "type": "uint256" }], "name": "RewardAdded", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "reward", "type": "uint256" }], "name": "RewardDenied", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "reward", "type": "uint256" }], "name": "RewardPaid", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "smartContractAddress", "type": "address" }, { "indexed": true, "internalType": "address", "name": "smartContractInitiator", "type": "address" }], "name": "SmartContractRecorded", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "Staked", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "Withdrawn", "type": "event" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "balanceOf", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "canMigrate", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "controller", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "duration", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "earned", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "exit", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "getReward", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "governance", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "isOwner", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "lastTimeRewardApplicable", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "lastUpdateTime", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "lpToken", "outputs": [{ "internalType": "contract IERC20", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "migrate", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "migrationStrategy", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "reward", "type": "uint256" }], "name": "notifyRewardAmount", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "owner", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "periodFinish", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "pullFromStrategy", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "recipient", "type": "address" }], "name": "pushReward", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [], "name": "renounceOwnership", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "rewardPerToken", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "rewardPerTokenStored", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "rewardRate", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "rewardToken", "outputs": [{ "internalType": "contract IERC20", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "rewards", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "bool", "name": "_canMigrate", "type": "bool" }], "name": "setCanMigrate", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_rewardDistribution", "type": "address" }], "name": "setRewardDistribution", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_store", "type": "address" }], "name": "setStorage", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "sourceVault", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "stake", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "store", "outputs": [{ "internalType": "contract Storage", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "totalSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "transferOwnership", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "userRewardPerTokenPaid", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "withdraw", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }
// ]
// const ExpoolAddress = "0x15d3A64B2d5ab9E152F16593Cdebc4bB165B5B4A"
// let Expool;

// const Erc20Abi = [
//     {
//         "inputs": [
//             {
//                 "internalType": "address",
//                 "name": "account",
//                 "type": "address"
//             }
//         ],
//         "name": "balanceOf",
//         "outputs": [
//             {
//                 "internalType": "uint256",
//                 "name": "",
//                 "type": "uint256"
//             }
//         ],
//         "stateMutability": "view",
//         "type": "function"
//     },
//     {
//         "inputs": [
//             {
//                 "internalType": "address",
//                 "name": "recipient",
//                 "type": "address"
//             },
//             {
//                 "internalType": "uint256",
//                 "name": "amount",
//                 "type": "uint256"
//             }
//         ],
//         "name": "transfer",
//         "outputs": [
//             {
//                 "internalType": "bool",
//                 "name": "",
//                 "type": "bool"
//             }
//         ],
//         "stateMutability": "nonpayable",
//         "type": "function"
//     }
// ]
// const compAddress = "0xc00e94cb662c3520282e6f5717214004a7f26888"
// const farmAddress = "0xa0246c9032bC3A600820415aE600c6388619A14D"

// let controller, rswap, reth, rseth, evaluator, compContract, farmContract;

// var web3 = new Web3(hre.network.provider);
// web3.eth.getChainId().then(res => console.log("Chain ID:", res));
// let deploySigner, user2, user3, user4, user5, user6, user7, harvestGov;




// async function getAddresses() {
//     [deploySigner, user2, user3, user4, user5, user6, user7] = await ethers.getSigners();
//     //deploySigner = owner;
//     deploySigner.getAddress().then(res => console.log("Deployer : ", res))
//     user2.getAddress().then(res => console.log("User 2 : ", res))
//     user3.getAddress().then(res => console.log("User 3 : ", res))
//     user4.getAddress().then(res => console.log("User 4 : ", res))
//     user5.getAddress().then(res => console.log("User 5 : ", res))
//     user6.getAddress().then(res => console.log("User 6 : ", res))
// }
// async function deploy() {
//     oracle = new ethers.Contract(oracleAddress, oracleAbi, deploySigner)
//     ceth = new ethers.Contract(cethaddress, cethAbi, deploySigner)
//     cdai = new ethers.Contract(cdaiaddress, cdaiAbi, deploySigner)
//     dai = new ethers.Contract(daiAddress, daiAbi, deploySigner)
//     Exvault = new ethers.Contract(ExvaultAddress, ExvaultAbi, deploySigner)
//     Expool = new ethers.Contract(ExpoolAddress, ExpoolAbi, deploySigner)
//     compContract = new ethers.Contract(compAddress, Erc20Abi, deploySigner)
//     farmContract = new ethers.Contract(farmAddress, Erc20Abi, deploySigner)
//     compCont = new ethers.Contract(compContAddress, compContAbi, deploySigner)
    
//     const Controller = await ethers.getContractFactory("contracts/controller.sol:Comptroller");
//     controller = await Controller.deploy();
//     console.log("Controller deployed to:", controller.address);
//     rx = await controller.deployTransaction.wait()
//     console.log({ gasUsed: rx.gasUsed.toString(), gasFee: controller.deployTransaction.gasPrice.div("1000000000").toString() + ' gwei',gasFeewei: controller.deployTransaction.gasPrice.toString() + ' wei'  });

//     const Rswap = await ethers.getContractFactory("rSwap");
//     rswap = await Rswap.deploy();
//     console.log("rswap deployed to:", rswap.address);
//     rx = await rswap.deployTransaction.wait()
//     console.log({ gasUsed: rx.gasUsed.toString(), gasFee: rswap.deployTransaction.gasPrice.div("1000000000").toString() + ' gwei',gasFeewei: controller.deployTransaction.gasPrice.toString() + ' wei'  });

//     const Reth = await ethers.getContractFactory("rETH");
//     reth = await Reth.deploy(controller.address, rswap.address);
//     console.log("reth deployed to:", reth.address);
//     rx = await reth.deployTransaction.wait()
//     console.log({ gasUsed: rx.gasUsed.toString(), gasFee: reth.deployTransaction.gasPrice.div("1000000000").toString() + ' gwei',gasFeewei: controller.deployTransaction.gasPrice.toString() + ' wei'  });

//     const Rseth = await ethers.getContractFactory("contracts/rseth.sol:rseth");
//     rseth = await Rseth.deploy(reth.address);
//     console.log("rseth deployed to:", rseth.address);
//     rx = await rseth.deployTransaction.wait()
//     console.log({ gasUsed: rx.gasUsed.toString(), gasFee: rseth.deployTransaction.gasPrice.div("1000000000").toString() + ' gwei',gasFeewei: controller.deployTransaction.gasPrice.toString() + ' wei'  });

//     const Evaluator = await ethers.getContractFactory("evaluator");
//     evaluator = await Evaluator.deploy(reth.address, controller.address, rswap.address, rseth.address);
//     console.log("evaluator deployed to:", evaluator.address);
//     rx = await evaluator.deployTransaction.wait()
//     console.log({ gasUsed: rx.gasUsed.toString(), gasFee: evaluator.deployTransaction.gasPrice.div("1000000000").toString() + ' gwei',gasFeewei: controller.deployTransaction.gasPrice.toString() + ' wei'  });


//     await controller.connect(deploySigner)._setPriceOracle("0x046728da7cb8272284238bD3e47909823d63A58D")

//     await controller.connect(deploySigner).changeAddresses(reth.address, evaluator.address)

//     await reth.connect(deploySigner).changeAddresses(controller.address, rseth.address, evaluator.address)

//     await whiteListAdd();
//     const accountToInpersonate = "0xE78388b4CE79068e89Bf8aA7f218eF6b9AB0e9d0"

//     await hre.network.provider.request({
//         method: "hardhat_impersonateAccount",
//         params: [accountToInpersonate],
//     });

//     await dai.connect(await ethers.getSigner(accountToInpersonate)).transfer(reth.address, ethers.utils.parseEther("1"))
//     await dai.connect(await ethers.getSigner(accountToInpersonate)).transfer(deploySigner.address, ethers.utils.parseEther("1"))
//     //console.log("Adding Success");
//     await hre.network.provider.request({
//         method: "hardhat_stopImpersonatingAccount",
//         params: [accountToInpersonate],
//     });

// }
// async function resetFork() {

//     console.log("Redeploying Contracts");

//     await network.provider.request({
//         method: "hardhat_reset",
//         params: [
//             {
//                 forking: {
//                     jsonRpcUrl: "https://eth-mainnet.alchemyapi.io/v2/C-VKiqty_uZlROJwGZ7PMKd0DGkI28Hz",
//                     blockNumber: 13574347,
//                 },
//             },
//         ],
//     });

//     const accountToInpersonate = "0x47ac0fb4f2d84898e4d9e7b4dab3c24507a6d503"

//     await hre.network.provider.request({
//         method: "hardhat_impersonateAccount",
//         params: [accountToInpersonate],
//     });

//     await dai.connect(await ethers.getSigner(accountToInpersonate)).transfer(user2.address, ethers.utils.parseEther("92000000"))
//     await dai.connect(await ethers.getSigner(accountToInpersonate)).transfer(deploySigner.getAddress(), ethers.utils.parseEther("100000000"))

//     await hre.network.provider.request({
//         method: "hardhat_stopImpersonatingAccount",
//         params: [accountToInpersonate],
//     });

//     const Controller = await ethers.getContractFactory("contracts/controller.sol:Comptroller");
//     controller = await Controller.deploy();
//     // console.log("Controller deployed to:", controller.address);

//     const Rswap = await ethers.getContractFactory("rSwap");
//     rswap = await Rswap.deploy();
//     // console.log("rswap deployed to:", rswap.address);

//     const Reth = await ethers.getContractFactory("rETH");
//     reth = await Reth.deploy(controller.address, rswap.address);
//     // console.log("reth deployed to:", reth.address);

//     const Rseth = await ethers.getContractFactory("contracts/rseth.sol:rseth");
//     rseth = await Rseth.deploy(reth.address);
//     // console.log("rseth deployed to:", rseth.address);

//     const Evaluator = await ethers.getContractFactory("evaluator");
//     evaluator = await Evaluator.deploy(reth.address, controller.address, rswap.address, rseth.address);

//     // console.log("evaluator deployed to:", evaluator.address);

//     await controller.connect(deploySigner)._setPriceOracle("0x046728da7cb8272284238bD3e47909823d63A58D")

//     await controller.connect(deploySigner).changeAddresses(reth.address, evaluator.address)

//     await reth.connect(deploySigner).changeAddresses(controller.address, rseth.address, evaluator.address)

//     await whiteListAdd();
// }


// async function whiteListAdd() {

//     const accountToInpersonate = "0xf00dD244228F51547f0563e60bCa65a30FBF5f7f"

//     await hre.network.provider.request({
//         method: "hardhat_impersonateAccount",
//         params: [accountToInpersonate],
//     });
//     harvestGov = await ethers.getSigner(accountToInpersonate)
//     const ContContract = await new web3.eth.Contract(contAbi, contaddress);
//     await ContContract.methods.addToWhitelist(reth.address).send({ from: accountToInpersonate })
//     await evaluator.connect(deploySigner).doWhitelist(deploySigner.address)
//     await evaluator.connect(deploySigner).doWhitelist(user2.address)
//     await evaluator.connect(deploySigner).doWhitelist(user3.address)
//     // //console.log("Adding Success");
//     // await hre.network.provider.request({
//     //   method: "hardhat_stopImpersonatingAccount",
//     //   params: [accountToInpersonate],
//     // });
//     describe("Reth Should be Whitelisted", async function () {
//         expect(await ContContract.methods.whitelist(reth.address).call()).to.equal(true);
//     })

// }

// async function performOperations() {
//     let overrides = {
//         value: ethers.utils.parseEther("0.1")

//     };
//     tx = await reth.connect(deploySigner).deposit(overrides);
//     rx = await tx.wait()
//     console.log({ Funtion: 'Deposit Ether', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     tx = await reth.connect(deploySigner).borrow(ethers.utils.parseEther("100"));
//     tx = await reth.connect(deploySigner).deposit(overrides);
//     rx = await tx.wait()
//     console.log({ Funtion: 'borrow Dai', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     res = await reth.borrowBalanceStored(await deploySigner.getAddress())
//     tx = await dai.connect(deploySigner).approve(reth.address, res.mul(101).div(100))
//     rx = await tx.wait()
//     console.log({ Funtion: 'Approving Dai', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });

//     tx = await reth.connect(deploySigner).repayAll(await deploySigner.getAddress());
//     rx = await tx.wait()
//     console.log({ Funtion: 'repay all borrowed', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     tx = await reth.connect(user2).takeLoan(ethers.utils.parseEther("10"), { value: ethers.utils.parseEther("1") })
//     rx = await tx.wait()
//     console.log({ Funtion: 'Take Loan', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     tx = await reth.connect(deploySigner).withdraw((await reth.balanceOf(deploySigner.getAddress())));
//     rx = await tx.wait()
//     console.log({ Funtion: 'Withdraw all Eth', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     await reth.connect(user3).deposit({ value: ethers.utils.parseEther("1") });
//     tx = await reth.connect(deploySigner).rebalance()
//     rx = await tx.wait()
//     console.log({ Funtion: 'Rebalance when LTV<minLTV', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     await reth.connect(user3).withdraw((await reth.balanceOf(user3.getAddress())));
//     tx = await reth.connect(deploySigner).rebalance()
//     rx = await tx.wait()
//     console.log({ Funtion: 'Rebalance when LTV>maxLTV', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });

//     const accountToInpersonate = "0xE78388b4CE79068e89Bf8aA7f218eF6b9AB0e9d0"

//     await hre.network.provider.request({
//         method: "hardhat_impersonateAccount",
//         params: [accountToInpersonate],
//     });

//     await dai.connect(await ethers.getSigner(accountToInpersonate)).transfer(reth.address, ethers.utils.parseEther("10"))
//     //console.log("Adding Success");
//     await hre.network.provider.request({
//         method: "hardhat_stopImpersonatingAccount",
//         params: [accountToInpersonate],
//     });
//     tx = await reth.connect(deploySigner).rebalance()
//     rx = await tx.wait()
//     console.log({ Funtion: 'Rebalance when Dai balance > minimum deposit', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     console.log('Sleeping 10s so as not to overload the server');
//     await sleep(10000);

//     await mineBlocks(100)
//     await earnHarvestRewards()
//     tx = await reth.connect(user3).claimRewards()
//     rx = await tx.wait()
//     console.log({ Funtion: 'claiming Rewards', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });

//     tx = await reth.harvest();
//     rx = await tx.wait()
//     console.log({ Funtion: 'Harvesting', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     tx = await reth.connect(deploySigner).commitUsers([deploySigner.address], reth.harvestIndex())
//     rx = await tx.wait()
//     console.log({ Funtion: 'Single User commiting', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     tx = await reth.connect(deploySigner).commitUsers([user3.address, user2.address], reth.harvestIndex())
//     rx = await tx.wait()
//     console.log({ Funtion: 'commiting 2 users', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });


//     tx = await rseth.connect(user4).stake({ value: ethers.utils.parseEther('1') })
//     rx = await tx.wait()
//     console.log({ Funtion: 'Stability User Deposit', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     const amount = rseth.balanceOf(user4.address);
//     tx = await rseth.connect(user4).requestRelease(amount)

//     rx = await tx.wait()
//     console.log({ Funtion: 'Stability User Request', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
//     await mineBlocks(180/13.15);
//     tx = await rseth.connect(user4).withdraw(user4.address, amount)
//     rx = await tx.wait()
//     console.log({ Funtion: 'Stability User Withdraw', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });

//     //creating scenario for oracle mismatch
//     const OracleN = await ethers.getContractFactory("retrieve");
//     oracleN = await OracleN.deploy();
//     console.log("oracleN deployed to:", oracleN.address);
//     await oracleN.connect(deploySigner).setAnswer(ethers.utils.parseEther('0.5'));
//     await rswap.connect(deploySigner).changeOracleTest(oracleN.address)
//     tx = await reth.connect(deploySigner).emergencyWithdraw();
//     rx = await tx.wait()
//     console.log({ Funtion: 'Emergency Withdraw', gasUsed: rx.gasUsed.toString(), gasFeegwei: tx.gasPrice.div("1000000000").toString() + ' gwei',gasFee: tx.gasPrice.toString() + ' wei' });
    
// }





// describe("Deploy & Test Contracts", async function () {
//     it("Gas Price Detection", async function () {
//         await getAddresses();
//         await deploy();
//         await performOperations();
//     }).timeout('1000s')
// })




// async function sleep(ms) {
//     return new Promise((resolve) => {
//       setTimeout(resolve, ms);
//     });
//   }


// //Helpers
// async function earnHarvestRewards() {
//     const stratAbi = [
//         { "inputs": [{ "internalType": "address", "name": "_storage", "type": "address" }, { "internalType": "address", "name": "_vault", "type": "address" }], "payable": false, "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "", "type": "uint256" }], "name": "Liquidating", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "profitAmount", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "feeAmount", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "timestamp", "type": "uint256" }], "name": "ProfitAndBuybackLog", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "profitAmount", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "feeAmount", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "timestamp", "type": "uint256" }], "name": "ProfitLogInReward", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "", "type": "address" }], "name": "ProfitsNotCollected", "type": "event" }, { "constant": true, "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "name": "WETH2underlying", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "__aave", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "__comp", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "__dai", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "__idle", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "__idleUnderlying", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "__stkaave", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "allowedRewardClaimable", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "claimAllowed", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "claimReward", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "controller", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "depositArbCheck", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "doHardWork", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "governance", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "idleTokenHelper", "outputs": [{ "internalType": "contract IIdleTokenHelper", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "idleUnderlying", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "investAllUnderlying", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "investedUnderlyingBalance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "multiSig", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "profitSharingDenominator", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "profitSharingNumerator", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "protected", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "referral", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "reward2WETH", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "rewardToken", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "name": "rewardTokens", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "address", "name": "token", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "salvage", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "sell", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "bool", "name": "_claimAllowed", "type": "bool" }], "name": "setClaimAllowed", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_token", "type": "address" }, { "internalType": "bool", "name": "_sell", "type": "bool" }], "name": "setLiquidation", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_address", "type": "address" }], "name": "setMultiSig", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "bool", "name": "_protected", "type": "bool" }], "name": "setProtected", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_newRef", "type": "address" }], "name": "setReferral", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "bool", "name": "flag", "type": "bool" }], "name": "setRewardClaimable", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "address", "name": "_store", "type": "address" }], "name": "setStorage", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "stkaave", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "store", "outputs": [{ "internalType": "contract Storage", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "sushiswapRouterV2", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "underlying", "outputs": [{ "internalType": "contract IERC20", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "uniswapRouterV2", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "unsalvagableTokens", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "useUni", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "vault", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "virtualPrice", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "weth", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [], "name": "withdrawAllToVault", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [{ "internalType": "uint256", "name": "amountUnderlying", "type": "uint256" }], "name": "withdrawToVault", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }]
//     const stratAddress = "0x9f357122F72a056E8A58CE89d3D88f62411c465C";
//     const stratContract = await new ethers.Contract(stratAddress, stratAbi, harvestGov)
//     await stratContract.connect(harvestGov).doHardWork()
// }

// async function mineBlocks(blockNumber) {

//     block = await web3.eth.getBlock('latest')
//     time = block.timestamp

//     while (blockNumber > 0) {
//         blockNumber--;
//         time += 13.5
//         await network.provider.send("evm_mine", [time])
//     }
// }
